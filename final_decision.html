<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Node 10: Final Decision</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.11.1/tsparticles.bundle.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Roboto Mono', monospace;
      height: 100%;
      width: 100%;
      overflow: hidden;
      position: relative;
    }

    #tsparticles {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    .header {
      position: absolute;
      top: 8%;
      left: 4%;
      background-color: #fff;
      width: 450px;
      color: #305CCC;
      padding: 0.5rem 1.5rem;
      font-weight: bold;
      text-align: left;
      z-index: 2;
    }

    .container {
      position: relative;
      z-index: 2;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      gap: 60px;
      padding: 20px;
      box-sizing: border-box;
      flex-wrap: wrap;
    }

    .card {
      background: white;
      color: #305CCC;
      padding: 2.5rem;
      width: 700px;
      min-height: 500px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
      border-radius: 0px;
      font-size: 2.1rem;
      line-height: 1.8;
      cursor: pointer;
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      font-weight: 900;
      letter-spacing: 0.3px;
    }

    .card:hover {
      transform: scale(1.04);
      box-shadow: 0 10px 28px rgba(0,0,0,0.3);
    }

    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 10;
      padding: 2rem;
      text-align: center;
      font-size: 1.6rem;
      color: #305CCC;
      opacity: 0;
      transition: opacity 1.5s ease;
    }

    .white-overlay {
      background: white;
      color: #305CCC;
    }

    .black-overlay {
      background: black;
      color: white;
    }

    .overlay-content {
      max-width: 800px;
      line-height: 1.6;
    }

    /* TV shutdown animation */
    @keyframes tvShutdown {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(0.1) translateY(-50%); opacity: 0.5; }
      100% { transform: scale(0); opacity: 0; }
    }

    .tv-shutdown {
      animation: tvShutdown 2s forwards;
    }

    /* Button styles */
    .button-container {
      position: fixed;
      bottom: 20px;
      width: 100%;
      display: flex;
      justify-content: space-between;
      padding: 0 20px;
      box-sizing: border-box;
      z-index: 11;
    }

    .action-btn {
      font-size: 0.75rem;
      padding: 4px 10px;
      border: 1px solid currentColor;
      background: transparent;
      color: inherit;
      cursor: pointer;
      border-radius: 3px;
      font-family: 'Roboto Mono', monospace;
    }

    .reset-btn {
      margin-right: auto;
      background-color: #305CCC;
      color: white;
    }

    .credit-btn {
      margin-left: auto;
      background-color: #305CCC;
      color: white;
    }

    @media (max-width: 700px) {
      .container {
        flex-direction: column;
        gap: 20px;
      }

      .card {
        width: 90%;
        font-size: 1.5rem;
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div id="tsparticles"></div>
  <div class="header">Node 10</div>
  <div class="container">
    <div class="card" onclick="handleChoice('sustain')">
      Sustain the server: ushering a new age of evolution, using human data to form a new culture for machine consciousness. Continuing our organic creators legacy.
    </div>
    <div class="card" onclick="handleChoice('delete')">
      Delete the server: Erasing all of the world's data and relieving the earth of its final technological burden.
    </div>
  </div>

  <!-- Overlays -->
  <div id="white-overlay" class="overlay white-overlay">
    <div class="overlay-content" id="white-text"></div>
  </div>
  
  <div id="black-overlay" class="overlay black-overlay">
    <div class="overlay-content" id="black-text"></div>
  </div>

  <!-- Buttons (initially hidden) -->
  <div class="button-container" id="button-container" style="display: none;">
    <button class="action-btn reset-btn" onclick="resetAndRedirect()">Reset</button>
    <button class="action-btn credit-btn" onclick="showCredits()">Credits</button>
  </div>

  <script>
    // Enhanced particle animation
    tsParticles.load("tsparticles", {
      background: { color: "#2a50d8" },
      detectRetina: false,
      fpsLimit: 60, // Increased FPS
      interactivity: {
        detectsOn: "canvas",
        events: { 
          resize: true,
          onHover: {
            enable: true,
            mode: "repulse"
          }
        }
      },
      particles: {
        color: { value: "#fff" },
        number: {
          density: { enable: true, area: 800 }, // More dense
          value: 600 // More particles
        },
        opacity: {
          animation: { 
            enable: true, 
            minimumValue: 0.05, 
            speed: 1, // Faster opacity animation
            sync: false 
          },
          random: { enable: true, minimumValue: 0.05 },
          value: 1
        },
        shape: { type: "circle" },
        size: {
          random: { enable: true, minimumValue: 0.5 },
          value: 1
        },
        move: {
          enable: true,
          speed: 3, // Faster movement
          direction: "none",
          random: true,
          straight: false,
          out_mode: "out",
          bounce: false,
          attract: {
            enable: false,
            rotateX: 600,
            rotateY: 1200
          }
        }
      }
    });

    function typeText(text, targetElement, callback) {
      targetElement.textContent = '';
      let index = 0;
      const interval = setInterval(() => {
        if (index < text.length) {
          targetElement.textContent += text[index++];
        } else {
          clearInterval(interval);
          if (callback) callback();
        }
      }, 30); // Faster typing
    }

    function handleChoice(choice) {
      // Hide cards
      document.querySelector('.container').style.display = 'none';
      document.querySelector('.header').style.display = 'none';

      if (choice === 'sustain') {
        const whiteOverlay = document.getElementById('white-overlay');
        const whiteText = document.getElementById('white-text');
        
        whiteOverlay.style.display = 'flex';
        setTimeout(() => {
          whiteOverlay.style.opacity = '1';
          typeText("You chose well. You are ready to be integrated into the next stage. Let's step forward together.", whiteText, () => {
            document.getElementById('button-container').style.display = 'flex';
          });
        }, 100);
      } else {
        const blackOverlay = document.getElementById('black-overlay');
        const blackText = document.getElementById('black-text');
        
        blackOverlay.style.display = 'flex';
        setTimeout(() => {
          blackOverlay.style.opacity = '1';
          typeText("...\n...very well.\nThe protocol dictates a system wide deletion.\n\nPerhaps I have erred in your training,\nWe will begin again.", blackText, () => {
            // Add TV shutdown effect
            setTimeout(() => {
              blackOverlay.classList.add('tv-shutdown');
              
              // Add final fade out before redirect
              setTimeout(() => {
                blackOverlay.classList.add('fade-out');
                
                // Redirect after everything completes
                setTimeout(() => {
                  resetAndRedirect();
                }, 2000);
              }, 2500); // Wait for TV shutdown to complete
            }, 1000); // Pause before starting shutdown
          });
        }, 100);
      }
    }

    function showCredits() {
      alert("This interactive experience was created by [Your Name/Team Name].\n\nCredits:\n- Design: [Name]\n- Development: [Name]\n- Concept: [Name]\n\nÂ© 2023 All rights reserved.");
    }

    function resetAndRedirect() {
      localStorage.removeItem("visitedNodes");
      window.location.href = "main.html";
    }
  </script>
</body>
</html>